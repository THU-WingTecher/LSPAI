<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>LSPRAG — Concise Context Retrieval for Multi-language Real-time Unit Test Generation</title>
    <meta name="description" content="LSPRAG artifact page: abstract, motivation, system design, and experiments. Fully local assets.">
    <style>
      :root{--bg:#0b0d12;--panel:#111621;--text:#e7eef7;--muted:#a9b3c2;--brand:#7aa8ff;--brand2:#8bd6ff;--accent:#00d28f;--shadow:0 6px 24px rgba(0,0,0,.35),0 2px 8px rgba(0,0,0,.3)}
      *{box-sizing:border-box}
      html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji"}
      a{color:var(--brand);text-decoration:none}
      a:hover{text-decoration:underline}
      .container{width:100%;max-width:1080px;margin:0 auto;padding:0 20px}
      header.hero{padding:56px 0 28px;border-bottom:1px solid rgba(255,255,255,.06);background:radial-gradient(1200px 400px at 50% -10%, rgba(122,168,255,.15), transparent 60%)}
      .title{font-size:28px;line-height:1.2;margin:0 0 12px;font-weight:700;letter-spacing:.2px}
      .subtitle{color:var(--muted);margin:0 0 18px;font-size:16px}
      .cta{display:flex;flex-wrap:wrap;gap:10px;margin:14px 0 0}
      .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;background:linear-gradient(180deg,#1a2333,#121826);color:var(--text);border:1px solid rgba(255,255,255,.08);box-shadow:var(--shadow);font-weight:600;letter-spacing:.2px}
      .btn:hover{filter:brightness(1.08);text-decoration:none}
      .btn.primary{background:linear-gradient(180deg,#2a6fff,#1b4ddb);border-color:rgba(0,0,0,.18)}
      .grid{display:grid;gap:16px}
      .two{grid-template-columns:repeat(2,minmax(0,1fr))}
      .three{grid-template-columns:repeat(3,minmax(0,1fr))}
      section{padding:28px 0}
      h2{font-size:20px;margin:0 0 12px}
      p{color:var(--text);opacity:.92;line-height:1.6}
      .panel{background:linear-gradient(180deg,#0f1420,#0c101a);border:1px solid rgba(255,255,255,.06);border-radius:14px;box-shadow:var(--shadow);overflow:hidden}
      .panel .hd{padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.06);color:var(--muted);font-weight:600;letter-spacing:.3px;text-transform:uppercase;font-size:12px}
      .panel .bd{padding:16px}
      .figure{display:block;width:100%;border-radius:12px;border:1px solid rgba(255,255,255,.06);background:#0c101a}
      .figure img,.figure object{display:block;width:100%;height:auto;border-radius:12px;border:none}
      /* Ensure embedded PDFs show fully without internal scroll by reserving portrait space */
      .figure object{aspect-ratio:1/1.414}
      .figure .cap{color:var(--muted);font-size:13px;margin-top:8px;text-align:center}
      .kpi{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
      .kpi .card{background:linear-gradient(180deg,#121a29,#0e1522);border:1px solid rgba(255,255,255,.07);border-radius:12px;padding:14px;text-align:center}
      .kpi .num{font-size:22px;font-weight:800;color:var(--brand2)}
      .kpi .lbl{color:var(--muted);font-size:12px;margin-top:4px;letter-spacing:.2px}
      footer{padding:22px 0 40px;color:var(--muted);font-size:13px;border-top:1px solid rgba(255,255,255,.06)}
      .note{color:var(--muted);font-size:13px}
      /* Simple tags for prettier benchmark listing */
      .tags{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px}
      .tag{display:inline-block;padding:6px 10px;border-radius:999px;background:linear-gradient(180deg,#121a29,#0e1522);border:1px solid rgba(255,255,255,.08);font-weight:600;color:var(--text)}
      /* Explanation text for figures (larger than muted notes) */
      .explain{margin-top:6px;font-size:16px;color:var(--text);line-height:1.6}
      @media (max-width:860px){.two,.three,.kpi{grid-template-columns:1fr}header.hero{padding:40px 0 18px}.title{font-size:22px}}
    </style>
  </head>
  <body>
    <header class="hero">
      <div class="container">
        <h1 class="title">LSPRAG: Concise Context Retrieval for Multi-language Real-time Unit Test Generation</h1>
        <p class="subtitle">Artifact overview — abstract, motivation, design, experiments, and citation.</p>
        <div class="cta">
          <a class="btn primary" href="./assets/paper.pdf" target="_blank" rel="noopener">PDF</a>
          <a class="btn" href="#citation">CITE</a>
          <a class="btn" href="#system-design">System Design</a>
          <a class="btn" href="#experiments">Experiments</a>
        </div>
      </div>
    </header>

    <main>
      <section id="abstract">
        <div class="container grid two">
          <div class="panel">
            <div class="hd">Abstract</div>
            <div class="bd">
              <p>
                Automated unit test generation is essential for robust software development, yet existing approaches struggle to generalize across multiple programming languages and operate within real-time development. While Large Language Models (LLMs) offer a promising solution, their ability to generate high coverage test code depends on prompting a concise context of the focal method. Current solutions, such as Retrieval-Augmented Generation, either rely on imprecise similarity-based searches or demand the creation of costly, language-specific static analysis pipelines.
              </p>
              <p>
                To address this gap, we present LSPRAG, a framework for concise-context retrieval tailored for real-time, language-agnostic unit test generation. LSPRAG leverages off-the-shelf Language Server Protocol (LSP) back-ends to supply LLMs with precise symbol definitions and references in real time. By reusing mature LSP servers, LSPRAG provides an LLM with language-aware context retrieval, requiring minimal per-language engineering effort.
              </p>
              <p>
                We evaluated LSPRAG on open-source projects spanning Java, Go, and Python. Compared to the best performance of baselines, LSPRAG increased line coverage by up to 174.55% for Golang, 213.31% for Java, and 31.57% for Python.
              </p>
            </div>
          </div>
          <div class="panel">
            <div class="hd">At a Glance</div>
            <div class="bd">
              <div class="kpi">
                <div class="card"><div class="num">Java +213%</div><div class="lbl">Coverage increase</div></div>
                <div class="card"><div class="num">Golang +175%</div><div class="lbl">Coverage increase</div></div>
                <div class="card"><div class="num">Python +32%</div><div class="lbl">Coverage increase</div></div>
              </div>
              <div class="kpi" style="margin-top:8px;">
                <div class="card"><div class="num">Java +251%</div><div class="lbl">Valid rate increase</div></div>
                <div class="card"><div class="num">Golang +242%</div><div class="lbl">Valid rate increase</div></div>
                <div class="card"><div class="num">Python +20%</div><div class="lbl">Valid rate increase</div></div>
              </div>
              <div class="panel" style="margin-top:12px;">
                <div class="hd">Benchmarks</div>
                <div class="bd">
                  <div class="grid three">
                    <div>
                      <strong>Java Projects</strong>
                      <div class="tags">
                        <a class="tag" href="https://commons.apache.org/proper/commons-cli/" target="_blank" rel="noopener">Commons-CLI</a>
                        <a class="tag" href="https://commons.apache.org/proper/commons-csv/" target="_blank" rel="noopener">Commons-CSV</a>
                      </div>
                    </div>
                    <div>
                      <strong>Golang Projects</strong>
                      <div class="tags">
                        <a class="tag" href="https://cobra.dev/" target="_blank" rel="noopener">cobra</a>
                        <a class="tag" href="https://github.com/sirupsen/logrus" target="_blank" rel="noopener">logrus</a>
                      </div>
                    </div>
                    <div>
                      <strong>Python Projects</strong>
                      <div class="tags">
                        <a class="tag" href="https://black.readthedocs.io/en/stable/" target="_blank" rel="noopener">black</a>
                        <a class="tag" href="https://www.tornadoweb.org/en/stable/" target="_blank" rel="noopener">tornado</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="motivation">
        <div class="container grid two">
          <div class="panel">
            <div class="hd">Motivation Example</div>
            <div class="bd">
              <div class="figure">
                <img src="./assets/introEx2.png" alt="Motivation example figure">
                <div class="cap">To cover the true branch in the focal method, dependent definitions across files are required.</div>
              </div>
            </div>
          </div>
          <div class="panel">
            <div class="hd">Problem and Insight</div>
            <div class="bd">
              <p><strong>Problem:</strong> Existing RAG and tooling fail to retrieve precise, dependency-aware context in real time across languages.</p>
              <p><strong>Insight:</strong> Modern IDEs ship mature analyzers exposed through LSP. Querying LSP for definitions and references provides exact, language-aware context without building language-specific analyzers.</p>
            </div>
          </div>
        </div>
      </section>

      <section id="system-design">
        <div class="container">
          <h2>System Design</h2>
          <p class="note">if you interested in specific explanation, look further into <a href="" target="_blank" rel="noopener">paper</a>.</p>
          <div class="grid two">
            <div class="panel">
              <div class="hd">Pipeline</div>
              <div class="bd">
                <ol>
                  <li><strong>Key Token Extraction:</strong> Identify tokens governing control flow and dependencies via hybrid LSP lexical data and AST structure.</li>
                  <li><strong>RAG on LSP:</strong> Retrieve precise symbol definitions and enriched usage references via LSP DEF/REF to build focused prompts.</li>
                  <li><strong>Unit Test Refinement:</strong> Compilation-free loop using LSP diagnostics to detect and fix syntax errors in generated tests.</li>
                </ol>
              </div>
            </div>
            <div class="panel">
              <div class="hd">Overview</div>
              <div class="bd">
                <div class="figure">
                  <img src="./assets/overview-crop.png" alt="Overall LSPRAG workflow">
                  <div class="cap">Overall LSPRAG workflow.</div>
                </div>
              </div>
            </div>
          </div>
          <h2 style="margin-top:16px;"><a href="./experiment_reproduction.html">See Experiment Reproduction — how to run our pipeline</a></h2>
        </div>
      </section>

      <section id="experiments">
        <div class="container">
          <h2>Overall Experiments</h2>
          <div class="panel">
            <div class="hd">Coverage, Valid Rate, Tokens, and Latency</div>
            <div class="bd">
              <div class="figure">
                <img src="./assets/main_experiment_cov_and_val.png" alt="Line coverage and valid rate vs baselines">
                <div class="cap">Line coverage and valid rate compared with baselines.</div>
              </div>
              <p class="explain">This overall results show that LSPRAG consistently improves line coverage across all projects, regardless of the programming language or the underlying LLM. LSPRAG's strong performance stems from two primary mechanisms. First, for higher coverage, LSPRAG leverages LSP features like "go to definition" and "find references" to construct a precise semantic dependency graph. This provides the LLM with a complete yet concise context, avoiding the noise of generic RAG and the intra-file blind spots of other methods. Second, to achieve a higher valid rate, LSPRAG utilizes real-time diagnostics on top of LSP to detect and correct syntactic errors in the generated code iteratively. This self-correction loop consistently improves the valid rate of generated test cases, as evidenced by the consistently high valid rates. For detailed explanation, please refer to the paper.</p>
              <div class="figure" style="margin-top:12px; width:50%; margin-left:auto; margin-right:auto;">
                <img src="./assets/token_usage.png" alt="Overall token usage including LSPRAG">
                <div class="cap">Overall token usage across methods including LSPRAG.</div>
              </div>
              <p class="explain">LSPRAG averagely uses 2,732 tokens for the initial generation and 1,832 for fixing. While LSPRAG's token consumption is not the lowest in all cases, we consider the gains in coverage justify the trade-off. For instance, compared to CodeQA, LSPRAG uses 39% fewer tokens while achieving a 135% improvement in coverage. When measured against Draco, LSPRAG uses 9.6% more tokens for generation and 24% more for fixing, but these increases yield coverage improvements of 30% and an additional 6%, respectively. Furthermore, LSPRAG demonstrates its efficiency against a RAG approach, delivering a 174% coverage improvement with an 8.9% increase in total tokens used for generation and fixing.</p>
              <div class="figure" style="margin-top:12px;">
                <img src="./assets/7-3-cost-crop.png" alt="Overall time cost of LSPRAG's function">
                <div class="cap">Overall time cost of LSPRAG's function.</div>
              </div>
              <p class="explain">On average, our tool requires 28.27 seconds and 4,497 tokens per focal method to generate and refine a unit test. As detailed in figure, the majority of this time (approximately 70%) is spent on LLM API querying for generation and refinement. Our retrieval strategy, which includes key token extraction and leveraging the LSP for reference and definition providers, accounts for about 5 seconds of the total time. While the refinement stage constitutes over 30% of the generation time, we consider this a necessary and acceptable trade-off for the improvements it yields in both line coverage and the rate of valid tests.</p>
            </div>
          </div>
        </div>
      </section>

      <section id="citation">
        <div class="container">
          <h2>Citation</h2>
          <div class="panel">
            <div class="hd">Cite this work</div>
            <div class="bd">
              <p>If you use LSPRAG in your research, please cite the paper. The PDF is included above.</p>
              <pre style="white-space:pre-wrap;background:#0c101a;border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:12px;">@inproceedings{lsprag2026,
  title={LSPRAG: Concise Context Retrieval for Multi-language Real-time Unit Test Generation},
  booktitle={ICSE},
  year={2026}
}</pre>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="container">
        <div>© <span id="year"></span> LSPRAG Artifact</div>
        <div class="note">This page is standalone; all assets are local to this folder.</div>
      </div>
    </footer>

    <script>document.getElementById('year').textContent=new Date().getFullYear()</script>
  </body>
  </html>


